<div class="min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 flex items-center justify-center p-4">
  
  <!-- ==================== JOIN PHASE ==================== -->
  <div *ngIf="gamePhase === 'join'" class="w-full max-w-md">
    <div class="bg-white rounded-3xl shadow-2xl p-8">
      <!-- Logo -->
      <div class="text-center mb-8">
        <div class="text-6xl mb-4">ğŸ®</div>
        <h1 class="text-3xl font-black text-gray-800">Kahoot!</h1>
        <p class="text-gray-500 mt-2">Ingresa el cÃ³digo PIN para jugar</p>
      </div>

      <!-- Error Message -->
      <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-xl mb-4 text-center">
        {{ errorMessage }}
      </div>

      <div class="space-y-4">
        <!-- PIN Code Input -->
        <div>
          <input 
            type="text" 
            [(ngModel)]="roomCode"
            class="w-full px-6 py-4 text-center text-3xl font-bold uppercase tracking-wider border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors"
            placeholder="PIN"
            maxlength="6"
            (keyup.enter)="userName ? joinGame() : null"
          />
        </div>

        <!-- Username Input -->
        <div>
          <input 
            type="text" 
            [(ngModel)]="userName"
            class="w-full px-6 py-4 text-center text-xl font-semibold border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors"
            placeholder="Tu nombre"
            maxlength="20"
            (keyup.enter)="joinGame()"
          />
        </div>

        <!-- Join Button -->
        <button 
          (click)="joinGame()"
          [disabled]="isLoading || !roomCode.trim() || !userName.trim()"
          class="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-xl py-4 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
        >
          {{ isLoading ? 'â³ Conectando...' : 'Â¡Entrar!' }}
        </button>
      </div>
    </div>
  </div>

  <!-- ==================== WAITING PHASE ==================== -->
  <div *ngIf="gamePhase === 'waiting'" class="text-center">
    <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-md">
      <div class="text-6xl mb-4 animate-bounce">â³</div>
      <h2 class="text-2xl font-bold text-gray-800 mb-2">Â¡Ya estÃ¡s dentro!</h2>
      <p class="text-gray-600 mb-4">Hola, <span class="font-bold text-purple-600">{{ userName }}</span></p>
      <div class="bg-gray-100 rounded-xl p-4">
        <p class="text-sm text-gray-500">Esperando que el presentador inicie el juego...</p>
      </div>
      <div class="mt-6 flex justify-center">
        <div class="animate-pulse flex space-x-2">
          <div class="w-3 h-3 bg-purple-500 rounded-full"></div>
          <div class="w-3 h-3 bg-purple-500 rounded-full animation-delay-200"></div>
          <div class="w-3 h-3 bg-purple-500 rounded-full animation-delay-400"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== QUESTION PHASE (Only Color Buttons) ==================== -->
  <div *ngIf="gamePhase === 'question'" class="w-full h-screen flex flex-col">
    <!-- Timer Bar at Top -->
    <div class="h-2 bg-gray-700">
      <div 
        [class]="getTimerColor() + ' h-full transition-all duration-1000'"
        [style.width.%]="getTimerPercentage()"
      ></div>
    </div>
    
    <!-- Timer Number -->
    <div class="text-center py-4">
      <span class="text-4xl font-black text-white">{{ timeRemaining }}</span>
    </div>

    <!-- Color Option Buttons (Full Screen Grid) -->
    <div class="flex-1 grid grid-cols-2 gap-3 p-3">
      <button 
        *ngFor="let color of optionColors; let i = index"
        (click)="selectAnswer(i)"
        [disabled]="hasAnswered"
        [class]="color.bg + ' ' + color.hover + ' rounded-2xl flex items-center justify-center transition-all transform active:scale-95 disabled:opacity-50'"
      >
        <span class="text-white text-6xl md:text-8xl">{{ color.icon }}</span>
      </button>
    </div>
  </div>

  <!-- ==================== ANSWERED PHASE (Waiting for results) ==================== -->
  <div *ngIf="gamePhase === 'answered'" class="text-center">
    <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-md">
      <!-- Selected Answer Color -->
      <div 
        *ngIf="selectedAnswer !== null"
        [class]="optionColors[selectedAnswer].bg + ' w-32 h-32 rounded-2xl flex items-center justify-center mx-auto mb-6'"
      >
        <span class="text-white text-6xl">{{ optionColors[selectedAnswer].icon }}</span>
      </div>
      
      <h2 class="text-2xl font-bold text-gray-800 mb-2">Â¡Respuesta enviada!</h2>
      <p class="text-gray-600">Esperando resultados...</p>
      
      <div class="mt-6 flex justify-center">
        <div class="animate-spin w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full"></div>
      </div>
    </div>
  </div>

  <!-- ==================== RESULT PHASE ==================== -->
  <div *ngIf="gamePhase === 'result'" class="text-center w-full max-w-md">
    <div [class]="(isCorrect ? 'bg-green-500' : 'bg-red-500') + ' rounded-3xl shadow-2xl p-8'">
      <!-- Result Icon -->
      <div class="text-8xl mb-4">
        {{ isCorrect ? 'ğŸ‰' : 'ğŸ˜¢' }}
      </div>
      
      <!-- Result Text -->
      <h2 class="text-3xl font-black text-white mb-2">
        {{ isCorrect ? 'Â¡Correcto!' : 'Incorrecto' }}
      </h2>
      
      <!-- Points Earned -->
      <div *ngIf="isCorrect" class="bg-white/20 rounded-xl p-4 mb-4">
        <p class="text-white text-lg">Puntos ganados</p>
        <p class="text-5xl font-black text-white">+{{ pointsEarned }}</p>
      </div>
      
      <!-- Correct Answer (if wrong) -->
      <div *ngIf="!isCorrect && correctAnswer >= 0" class="bg-white/20 rounded-xl p-4 mb-4">
        <p class="text-white text-sm mb-2">La respuesta correcta era:</p>
        <div 
          [class]="optionColors[correctAnswer].bg + ' inline-flex items-center px-4 py-2 rounded-xl'"
        >
          <span class="text-white text-2xl mr-2">{{ optionColors[correctAnswer].icon }}</span>
          <span class="text-white font-bold">{{ optionColors[correctAnswer].name }}</span>
        </div>
      </div>
      
      <!-- Total Score -->
      <div class="mt-6 bg-white rounded-xl p-4">
        <p class="text-gray-600 text-sm">Tu puntuaciÃ³n total</p>
        <p class="text-4xl font-black text-purple-600">{{ totalScore }}</p>
      </div>
    </div>
  </div>

  <!-- ==================== LEADERBOARD PHASE ==================== -->
  <div *ngIf="gamePhase === 'leaderboard'" class="text-center w-full max-w-md">
    <div class="bg-white rounded-3xl shadow-2xl p-8">
      <div class="text-6xl mb-4">{{ getRankEmoji() }}</div>
      
      <h2 class="text-2xl font-bold text-gray-800 mb-2">
        EstÃ¡s en el puesto {{ rank }}
      </h2>
      
      <div class="bg-gradient-to-r from-purple-500 to-indigo-500 rounded-xl p-6 mt-4">
        <p class="text-white text-lg">Tu puntuaciÃ³n</p>
        <p class="text-5xl font-black text-white">{{ totalScore }}</p>
      </div>
      
      <p class="text-gray-500 mt-6 text-sm">
        Esperando siguiente pregunta...
      </p>
    </div>
  </div>

  <!-- ==================== FINISHED PHASE ==================== -->
  <div *ngIf="gamePhase === 'finished'" class="text-center w-full max-w-md">
    <div class="bg-white rounded-3xl shadow-2xl p-8">
      <div class="text-8xl mb-4">ğŸ†</div>
      
      <h1 class="text-3xl font-black text-gray-800 mb-2">Â¡Juego Terminado!</h1>
      
      <!-- Final Rank -->
      <div class="bg-gradient-to-r from-yellow-400 to-orange-400 rounded-xl p-6 mt-4">
        <p class="text-white text-lg">PosiciÃ³n Final</p>
        <p class="text-6xl font-black text-white">{{ getRankEmoji() }} {{ rank }}Â°</p>
      </div>
      
      <!-- Final Score -->
      <div class="bg-gradient-to-r from-purple-500 to-indigo-500 rounded-xl p-6 mt-4">
        <p class="text-white text-lg">PuntuaciÃ³n Final</p>
        <p class="text-5xl font-black text-white">{{ totalScore }}</p>
      </div>
      
      <!-- Play Again Button -->
      <button 
        (click)="playAgain()"
        class="mt-6 w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-xl py-4 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all transform hover:scale-105"
      >
        ğŸ® Jugar de Nuevo
      </button>
    </div>
  </div>
</div>
